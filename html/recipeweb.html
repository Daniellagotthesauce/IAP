<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe</title>
    <link rel="stylesheet" href="../css/recipeweb.css">
</head>

<body>
    <header>
        <div class="Logo">
            <img src="../photos/logo.jpg" alt="Soul Kitchen Logo">
        </div>
        <h1 class="Header">SOUL KITCHEN</h1>
        <div class="Links">
            <a href="#">Home</a>
            <a href="displayRecipe.html">Recipes</a>
            <a href="#">About</a>
            <a href="#">Contacts</a>
            <a href="Login.html">Login</a>
        </div>
    </header>

    <div class="Content">
        <div class="Phrase">
            <h1>From Our Kitchen To Yours!</h1>
            <div class="Intro">
                <p>Explore a variety of delicious recipes, perfect for any occasion...</p>
            </div>
            <div class="Search">
                <input type="text" placeholder="Search a recipe">
                <button type="submit">Search</button>
            </div>
        </div>
        <div class="Plate">
            <img src="../photos/dark.jpeg" alt="Delicious Food">
        </div>
    </div>

    <p class="Karibu">Welcome!</p>

    <div class="Content2">
        <div class="box">
            <img src="../photos/breakfast.jpeg" alt="Breakfast">
            <h2>Breakfast Delights</h2>
            <div class="Description">
                <p>Start your day with a burst of flavor and energy...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/pasta.jpeg" alt="Pasta">
            <h2>Dinner Delights</h2>
            <div class="Description">
                <p>End your day with a feast! Our dinner section features...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/dessert.jpeg" alt="Desserts">
            <h2>Sweet Endings</h2>
            <div class="Description">
                <p>Indulge in our delectable desserts...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/drinks.jpeg" alt="Drinks">
            <h2>Refreshing Sips</h2>
            <div class="Description">
                <p>Quench your thirst with our refreshing drinks...</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch("http://localhost:4000/session", {
                method: "GET",
                credentials: "include", // Ensures cookies are sent
            })
                .then((response) => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error("Session not found. Please log in.");
                    }
                })
                .then((data) => {
                    console.log("User Session Data:", data);
                    const header = document.querySelector(".Header");
                    if (data.UserTypeID === 1) {
                        header.textContent = "Welcome, Food Enthusiast!";
                    } else if (data.UserTypeID === 0) {
                        header.textContent = "Welcome, Recipe Owner!";
                        document.querySelector(".Links").innerHTML +=
                            '<a href="addRecipe.html">Add Recipe</a>';
                    }
                })
                .catch((err) => {
                    console.error(err);
                    window.location.href = "Login.html";
                });
        });

    </script>

</body>

<footer>
    <div class="Logo">
        <img src="../photos/logo.jpg" alt="Soul Kitchen Logo">
    </div>
    <h1 class="Header">SOUL KITCHEN</h1>
    <div class="end">
        <h3>Company</h3>
    </div>
    <div class="end">
        <h3>Location</h3>
    </div>
</footer>

</html>