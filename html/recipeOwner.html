<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe</title>
    <link rel="stylesheet" href="../css/recipeweb.css">
</head>

<body>
    <header>
        <div class="Logo">
            <img src="../photos/logo.jpg" alt="Soul Kitchen Logo">
        </div>
        <h1 class="Header">SOUL KITCHEN</h1>
        <div class="Links">
            <a href="#">Home</a>
            <a href="allRecipes.html">Recipes</a>
            <a id="addRecipeLink" href="addRecipes.html">Add recipe</a>
            <a id="manageRecipeLink" href="manageRecipes.html">Manage recipes</a>
            <a href="#">About</a>
            <a href="#">Contacts</a>
            <a href="Login.html">Login</a>
        </div>
    </header>

    <div class="Content">
        <div class="Phrase">
            <h1>Welcome Recipe Owner!</h1>
            <div class="Intro">
                <p>Explore a variety of delicious recipes, perfect for any occasion...</p>
            </div>
            <div class="Search">
                <input type="text" placeholder="Search a recipe">
                <button type="submit">Search</button>
            </div>
        </div>
        <div class="Plate">
            <img src="../photos/dark.jpeg" alt="Delicious Food">
        </div>
    </div>

    <p class="Karibu">Welcome!</p>

    <div class="Content2">
        <div class="box">
            <img src="../photos/breakfast.jpeg" alt="Breakfast">
            <h2>Breakfast Delights</h2>
            <div class="Description">
                <p>Start your day with a burst of flavor and energy...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/pasta.jpeg" alt="Pasta">
            <h2>Dinner Delights</h2>
            <div class="Description">
                <p>End your day with a feast! Our dinner section features...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/dessert.jpeg" alt="Desserts">
            <h2>Sweet Endings</h2>
            <div class="Description">
                <p>Indulge in our delectable desserts...</p>
            </div>
        </div>
        <div class="box">
            <img src="../photos/drinks.jpeg" alt="Drinks">
            <h2>Refreshing Sips</h2>
            <div class="Description">
                <p>Quench your thirst with our refreshing drinks...</p>
            </div>
        </div>
    </div>

    <div class="token-container">
        <p>Your API Token:</p>
        <div id="tokenDisplay" class="token-display"></div>
        <button id="copyTokenBtn" class="copy-button">Copy Token</button>
    </div>

</body>

<footer>
    <div class="Logo">
        <img src="../photos/logo.jpg" alt="Soul Kitchen Logo">
    </div>
    <h1 class="Header">SOUL KITCHEN</h1>
    <div class="end">
        <h3>Company</h3>
    </div>
    <div class="end">
        <h3>Location</h3>
    </div>
</footer>

<script>

// Get the UserID from localStorage
const userID = localStorage.getItem('UserID');

// Check if the UserID is available
if (userID) {
    // Dynamically update the links with the userID
    document.getElementById('addRecipeLink').href = `addRecipes.html?userID=${userID}`;
    document.getElementById('manageRecipeLink').href = `manageRecipes.html?userID=${userID}`;
} else {
    // If UserID is not found in localStorage, redirect to login page
    alert('You are not logged in. Please log in again.');
    window.location.href = 'login.html';
}



    document.addEventListener('DOMContentLoaded', () => {
    const token = localStorage.getItem('accessToken'); // Get the token from localStorage
    const tokenDisplay = document.getElementById('tokenDisplay');

    if (token && tokenDisplay) {
        tokenDisplay.textContent = `Your API Token: ${token}`; // Display the token
    }

    // OPTIONAL: Clean up the URL by removing the token query parameter
    const url = new URL(window.location);
    url.searchParams.delete('token');
    window.history.replaceState({}, document.title, url.toString());
});
document.addEventListener('DOMContentLoaded', () => {
    const token = localStorage.getItem('accessToken'); // Get token from localStorage
    const tokenDisplay = document.querySelector('.token-display'); // Correctly target the token display box
    const copyButton = document.getElementById('copyTokenBtn');

    if (token && tokenDisplay) {
        tokenDisplay.textContent = token; // Insert the token into the correct box
    }

    if (copyButton) {
        copyButton.addEventListener('click', () => {
            if (token) {
                navigator.clipboard.writeText(token).then(() => {
                    alert('Token copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy token:', err);
                });
            }
        });
    }
});
</script>

</html>